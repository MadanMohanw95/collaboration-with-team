private Task InitializeAddressDataAsync()
{
    if (Context is ValueTuple<List<Address>, List<ContactAddress>> tuple)
    {
        Addresses = tuple.Item1.Select(a => (Address)a.Clone()).ToList();
        ContactAddresses = tuple.Item2.Select(ca => (ContactAddress)ca.Clone()).ToList();
    }
    else
    {
        Addresses = new List<Address>();
        ContactAddresses = new List<ContactAddress>();
    }

    // Initialize CurrentAddr but do not touch ContactAddrModel here
    if (CurrentAddr == null)
        CurrentAddr = new Address { ModifiedBy = User?.UserName };

    return Task.CompletedTask;
}


private void SetupContactAddressEditContext()
{
    if (ContactAddrModel == null)
    {
        ContactAddrModel = new ContactAddress { ModifiedBy = User?.UserName };
    }

    if (CAddrEditContext == null || CAddrEditContext.Model != ContactAddrModel)
    {
        CAddrEditContext = new EditContext(ContactAddrModel);
        CAddrEditContext.OnValidationStateChanged += (sender, args) =>
        {
            MergedValidationMsgs = CAddrEditContext.GetValidationMessages().ToList();
            StateHasChanged();
        };
    }
}


private void ResetCurrentModels()
{
    CurrentAddr = new Address { ModifiedBy = User?.UserName };
    EditContext = new EditContext(CurrentAddr);

    ContactAddrModel = new ContactAddress { ModifiedBy = User?.UserName };
    SetupContactAddressEditContext();
}


protected override async Task OnInitializedAsync()
{
    await base.OnInitializedAsync();
    await InitializeAddressDataAsync();
    SetupContactAddressEditContext();
    await GetAddressTypesAsync();
}
